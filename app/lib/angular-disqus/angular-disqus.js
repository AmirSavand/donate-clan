/**
 * https://github.com/kirstein/angular-disqus
 */
!function(i,e){"use strict";var t=i.module("ngDisqus",[]);t.provider("$disqus",function(){var t,n="embed.js",s="count.js";function r(){return t||e.disqus_shortname}function u(i,t,n){e.disqus_identifier=i,e.disqus_url=t,e.disqus_shortname=n}function o(i,e){var t,n,s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],r=function(i,e){return"//"+i+".disqus.com/"+e}(i,e);(function(i,e){var t,n=i.getElementsByTagName("script");for(t=0;t<n.length;t+=1)if(~n[t].src.indexOf(e))return!0;return!1})(s,r)||s.appendChild((t=r,(n=document.createElement("script")).type="text/javascript",n.async=!0,n.src=t,n))}this.setShortname=function(i){t=i},this.$get=["$location",function(d){return{commit:function(t){var s=r();if(!i.isDefined(s))throw new Error("No disqus shortname defined");if(!i.isDefined(t))throw new Error("No disqus thread id defined");i.isDefined(e.DISQUS)?function(i,t){e.DISQUS.reset({reload:!0,config:function(){this.page.identifier=t,this.page.url=i.absUrl()}})}(d,t):(u(t,d.absUrl(),s),o(s,n))},getShortname:r,loadCount:function(c){var a;u(c,d.absUrl(),t),o(r(),n),o(r(),s),(a=e.DISQUSWIDGETS)&&i.isFunction(a.getCount)&&a.getCount()}}}]}),t.directive("disqus",["$disqus",function(e){return{restrict:"AC",replace:!0,scope:{id:"=disqus"},template:'<div id="disqus_thread"></div>',link:function(t){t.$watch("id",function(t){i.isDefined(t)&&e.commit(t)})}}}]),t.directive("disqusIdentifier",["$disqus",function(i){return{restrict:"A",link:function(e,t,n){i.loadCount(n.disqusIdentifier)}}}])}(angular,this);
